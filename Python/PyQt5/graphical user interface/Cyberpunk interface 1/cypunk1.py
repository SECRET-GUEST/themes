#         ████████     ██████
#        █░░░░░░░░██_██░░░░░░█
#       █░░░░░░░░░░░█░░░░░░░░░█
#      █░░░░░░░███░░░█░░░░░░░░░█
#      █░░░░███░░░███░█░░░████░█
#    █░░░██░░░░░░░░███░██░░░░██
#   █░░░░░░░░░░░░░░░░░█░░░░░░░░███
#   █░░░░░░░░░░░░░██████░░░░░████░░█
#   █░░░░░░░░░█████░░░████░░██░░██░░█
#  ██░░░░░░░███░░░░░░░░░░█░░░░░░░░███
# █░░░░░░░░░░░░░░█████████░░█████████
#█░░░░░░░░░░█████ ████   ████ █████ █
#█░░░░░░░░░░█      █ ███   █   ███ █ █
#█░░░░░░░░░░░░█   ████ ████    ██ ████
#░░░░░░░░░░░░░█████████░░░████████░░░█
#░░░░░░░░░░░░░░░░█░░░░░█░░░░░░░░░░░░█
#░░░░░░░░░░░░░░░░░░░░██░░░░█░░░░░░██
#░░░░░░░░░░░░░░░░░░██░░░░░░░███████
#░░░░░░░░░░░░░░░░██░░░░░░░░░░█░░░░░█                                            _____                                 _____                                            _____                                                   _____
#░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█                                          /\    \                               /\    \                                          /\    \                                                 /\    \
#░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█                      ::                 /::\    \                             /::\    \                                        /::\____\                                               /::\____\
#░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█                                        /::::\    \                           /::::\    \           :::         ::           ::: ::/    /                         :                   :: ::/    /
#░░░░░░░░░░░█████████░░░░░░░░░░░░░░██                                       /::::::\    \                         /::::::\    \                               ::: : :::/    /                                              /:::/    /
#░░░░░░░░░░█▒▒▒▒▒▒▒▒███████████████▒▒█                                     /:::/\:::\    \                    :: ::::/\:::\    \                                  /:::/    /                                              /:::/    /
#░░░░░░░░░█▒▒███████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█                                    /:::/__\:::\    \                     /:::/__\:::\    \                                /:::/    /                                            :::: :/____/
#░░░░░░░░░█▒▒▒█▓▓▓▓██████████████████                                    /::::\   \:::\    \                   /::::\   \:::\    \                              /:::/    /                                              /::::\    \
#░░░░░░░░░██▒▒█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█                                       /::::::\   \:::\    \                 /::::::\   \:::\    \                            /:       /      _____                                   /::::::\    \   _____
#░░░░░░░░░░█▒▒█▓█████████████████ ████                                 /:::/\:::\   \:::\ ___\               /:::/\:::\   \:::\____\                          /:::/____/      /\    \                                 /:::/\:::\    \ /\    \
#░░░░░░░░░░█▒▒██▓▓▒▓▒▓▒▓▒▒▒▒▒▒▒▒▓█▓▒▒▒█                               /:::/__\:::\   \:::|    |             /:::/  \:::\   \:::|    |                         :::|    /      /::\____\                        ::::::: :::/ : :::\    /::\____\
#░░░░░░░░░█▒▒████████▓▒███▓██▒▒▒▒▒▒▒▒▒█                  :            \:::\   \:::\  /:::|____|             \::/   |::::\  /:::|____|                      : :: :|____\     /:::/    /                               \::/    \:::\: ::::/    /
#░░░░░░░░░█▒▒▒▒▒▒▒▒▒█████████████▓█▓██                                 \:::\   \:::\/:::/    /               \/____|:::::\/:::/    /                          \:::\    \   /:::/    /                                 \/____/: :::\/:::/    /
#░░░░░░░░░░████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒█                                  \:::\   \::::::/    /                      |:::::::::/    /                            \:::\   :: : ::/    /                                 :  :  : : :::::::/    /
#░░░░░░░░░░░░░░░░░░██████████████████                                    \:::\   \::::/    /          :  :         |::|\::::/    /           ::                 \:::\    /:::/    /               ::::                          \::       /
#░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█            ::                           \:::\  /:::/    /                      :: ::| \::/____/                                \:::\__/:::/    /                                              /:::/    /
#██░░░░░░░░░░░░░░░░░░░░░░░░░░░██                                           \:::\/:::/    /                         |::|  ~|                                       \::::::::/    /                                             : :::/    /
#▓██░░░░░░░░░░░░░░░░░░░░░░░░██                                              \::::::/    /                          |::|   |                                        \::::::/    /                                              /:::/    /
#▓▓▓███░░░░░░░░░░░░░░░░░░░░█                                                 \::::/    /                           \::|   |                                         \::::/    /                              ::: :           /:::/    /
#▓▓▓▓▓▓███░░░░░░░░░░░░░░░██                                 :                 \::/____/            :                \:|   |               :    ::::                  \::/____/                                               \::/    /
#▓▓▓▓▓▓▓▓▓███████████████▓▓█                                                   ⠋                                     \|___|                                           ⠩                                                      \/____/
#▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██
#▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█                                                                                                                                                                                                                                               |                                                                    |                                      |
#▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█                                                                    |                                                                                                             |
#______________________________                                                                                                                       |                                                                                                                      |                                                                                                                                              |                    |
#___________________________
#_ ______ _____ _________
#/            /                                                         |                                |                       |                    |                |                       |                    |                |                       |                    |                     |                       |                    |
                
#       \                          |                                |                                               |  |                                          |                    |                                          |                       |                    |  |                                           |                    |        |                    |                              |
                

#     |               |                                 |
                
#                 |                                                |            |                                   |                               |                           |                               |                           |                               |                                |                               |
#          |                                  |                                     |
                
#                 |                     |                                                     |                                   |                               |     |                                   |                               |     |                                   |                               |          |                                   |                               |
#  |                          |                       |                    |
#          |                                    |                                         |     |                    |                                    | |     |                    |                                    | |     |                    |                                    |      |     |                                                        |
#     |                        |                                 |      |                                |                       |                    |                |                       |                    |                |                       |                    |                     |                       |                    |
                
#                     |                                                |      |                                   |                               |                         |                               |                         |                               |                              |                               |
#          |                                   |                               |                   |                                |                       |                    |          |                                |                       |                    |          |                                |                       |                    |               |                                |                                        |
                
#                 |                     |
#  |                                |                       |                    |            |                                |                       |                    |     |                                |                       |                    |     |                                |                       |                              |                                |
#          |                               |                                         |                              |                       |                    |                           |                       |                    |                           |                       |                    |                                |                       |                    |
                
#  |         |                                   PRESENTATION                                                |                                |                    |   |                                |                    |   |                                |                    |        |                                |                    |
#                                                                                                                              |                               |     |                                   |                               |     |                                   |                               |          |                                   |                               |
#               |                             /                 \                          |                                                                              |                               |     |                                   |                               |     |                                   |                               |          |                                   |                               |
                
#       |                            A cyberpunk graphical interface for                    |                                           |               |                                           |               |                                           |                    |                                           |
                
#                          /                      |    v    |                    \
                
#               your app, you just have to import the class, you have an example of use downside      |                                |                                          |      |                                |                                          |      |                                |                                          |           |                                |  
#     |                  !      |                                   |     |                                |                       |                    |                |                       |                    |                |                       |                    |                    |                                           |
#                               |                                   |     |                  
#                  |            |                   Anyway          !                        |                                         |                                |                       |                    |                |                       |                    |                |                       |                    |                    |
                
#             |                      |                 have                                                 |                        |                                         |                                |                       |                    |                |                       |                    |                |                       |                    |                     |                                           |
                

#                |                                  FUN         |                        |                                         |                                |                       |                    |                |                       |                    |                |                       |                    |                    |                                                                      |
                
#                                                        =)
                
#
#                               |                      or                                       |                                                            |                    |                |                       |                    |                |                       |                    |                    |                                           |
                

#             |                              |       DIE ! ! !        |                       |                            |                |                       |                    |                |                       |                    |                    |                                           |#     |                        |                                         |                                |
                
#
#                                                    !                                       |                                |                    |  |                                |                    |  |                                |                    |       |                                |                    |
                
#     |               |                                 !
                
#                 |                                                |            |                                   |                               |                           |                               |                           |                               |                                |                               |
#          |                                  !                                     |
                
#                 |                     |                                                     |                                   |                               |     |                                   |                               |     |                                   |                               |          |                                   |                               |
#  |                          |                       |                    !
#          |                                    |                                         |     |                    |                                    | |     |                    |                                    | |     |                    |                                    |      |     |                    |                                    |
#     |                        |                                 |      |                                |                       |                    |                |                       |                    |                |                       |                    |                    |                                           |
                
#                     |                                                |      |                                   |                               |                         |                               |                         |                               |                              |                               |
#          |                                   |                               |                   |                                |                       |                    |          |                                |                       |                    |          |                                |                       |                    |               |                                                                |
              
#_ _  _ ____ ___ ____ _    _    ____ ___ _ ____ _  _
#| |\ | [__   |  |__| |    |    |__|  |  | |  | |\ |
#| | \| ___]  |  |  | |___ |___ |  |  |  | |__| | \|
        

from PyQt5.QtWidgets import  QMainWindow, QWidget, QPushButton, QFrame, QLabel,QMessageBox,QVBoxLayout
from PyQt5.QtGui import QIcon, QPainterPath,QRegion,QPainter, QColor,QPainterPath
from PyQt5.QtCore import Qt, QPoint,QEvent


#___  ____ _ _ _ ____ ____    ___  _    ____ _  _ ___
#|__] |  | | | | |___ |__/    |__] |    |__| |\ |  |
#|    |__| |_|_| |___ |  \    |    |___ |  | | \|  |
                

#OPENING | https://www.youtube.com/watch?v=_85LaeTCtV8 :3




#_  _ ____ _  _ ____    ____ ___  ___     _ _ _ _ ___ _  _    ___ _ ___ _    ____ 
#|\/| |  | |  | |___    |__| |__] |__]    | | | |  |  |__|     |  |  |  |    |___ 
#|  | |__|  \/  |___    |  | |    |       |_|_| |  |  |  |     |  |  |  |___ |___ 
                                                                                 

class cypunkTitle1(QWidget):
    def __init__(self, parent):
        super().__init__(parent)

        self.setMouseTracking(True)  # enable tracking of mouse movements
        self.mouse_pressed = False  # initialize flag to check if mouse button is pressed
        self.mouse_position = QPoint()  # initialize mouse position variable

    def mousePressEvent(self, event):
        if event.button() == Qt.LeftButton:  # check if left mouse button is pressed
            self.mouse_pressed = True  # set flag to indicate left button is pressed
            self.mouse_position = event.globalPos() - self.parent().pos()  # calculate mouse position relative to parent widget
            event.accept()

    def mouseReleaseEvent(self, event):
        if event.button() == Qt.LeftButton:  # check if left mouse button is released
            self.mouse_pressed = False  # set flag to indicate left button is released
            event.accept()

    def mouseMoveEvent(self, event):
        if self.mouse_pressed:  # check if left mouse button is pressed
            self.parent().move(event.globalPos() - self.mouse_position)  # move parent widget according to mouse position
            event.accept()



#_  _ ____ _ _  _    _ _ _ _ _  _ ___  ____ _ _ _ 
#|\/| |__| | |\ |    | | | | |\ | |  \ |  | | | | 
#|  | |  | | | \|    |_|_| | | \| |__/ |__| |_|_| 
                                                 


class cypunk1Window(QMainWindow):
    def __init__(self, title, window_size, btn_close, btn_minimize=None, btn_show=None, stylesheet_path=None):
        super().__init__()
        self.mwgui(title, window_size, btn_close, btn_minimize, btn_show, stylesheet_path)


    # Graphical user interface of main window
    def mwgui(self, title, window_size, btn_close, btn_minimize, btn_show, stylesheet_path):
        self.title = title  # initialize window title in a variable that can be used in another page
        self.btn_close = btn_close 
        self.btn_minimize = btn_minimize  
        self.btn_show = btn_show  

        # Set Layout for the title (you can add self.layout.addWidget(YOUR_WIDGET) directly in other pages  )
        self.init_Vlayout()


        #Load stylesheet if available
        if stylesheet_path:
            with open(stylesheet_path, "r") as file:
                stylesheet = file.read()
                self.setStyleSheet(stylesheet)  # set stylesheet for the window

        self.minimize_icon = QIcon(btn_minimize)  
        self.show_icon = QIcon(btn_show)  

        width, height = map(int, window_size.split("x"))  # parse window size from string

        self.setWindowFlags(Qt.WindowStaysOnTopHint | Qt.FramelessWindowHint)  # set window flags
        self.setAttribute(Qt.WA_NoSystemBackground, True)  # set widget attribute for no system background
        self.setAttribute(Qt.WA_TranslucentBackground, True)  # set widget attribute for translucent background

        self.central_widget = QFrame()  # create a central widget to let set the rgba(transparency) in your other page
        self.setFixedSize(width, height)  # set fixed size for the window
        self.setCentralWidget(self.central_widget)  
        self.central_widget.setObjectName("centralFrame")  

        self.set_hexagon_shape()  # set hexagonal shape of the window

        self.title_bar = cypunkTitle1(self)  # create title bar widget
        self.title_bar.setGeometry(0, 0, self.width(), 30)  # set geometry for title bar widget

        self.hide_button = QPushButton(self.title_bar)  # create minimize button

        #Use this to minimize the window with an image
        if btn_minimize:
            self.hide_button.setIcon(QIcon(btn_minimize)) 

        self.hide_button.setGeometry(0, 5, 30, 20) 
        self.hide_button.setStyleSheet("background-color: transparent;") 
        self.hide_button.clicked.connect(self.toggle_window) 

        self.title_label = QLabel(title, self.title_bar, objectName="title")  # create title label you can reuse in css
        self.title_label.setGeometry(28, 5, 200, 20)  
        self.title_label.setStyleSheet("background-color: transparent;")  




        #The close button appart from the window
        self.close_button = QPushButton(self.title_bar)  # create close button
        if btn_close:
            self.close_button.setIcon(QIcon(btn_close))  
        self.close_button.setGeometry(width - 30, 5, 20, 20) 
        self.close_button.setStyleSheet("background-color: transparent;")  
        self.close_button.clicked.connect(self.close_application) 


        # Create a new widget for the close button
        self.close_button_widget = QWidget()

        self.close_button_widget.setWindowFlags(Qt.WindowStaysOnTopHint | Qt.FramelessWindowHint | Qt.Tool)
        self.close_button_widget.setAttribute(Qt.WA_NoSystemBackground, True)
        self.close_button_widget.setAttribute(Qt.WA_TranslucentBackground, True)

        # Move the close button to the new widget
        self.close_button.setParent(self.close_button_widget)
        self.close_button.setGeometry(0,2, 20, 20)
        self.close_button.clicked.connect(self.close)

        # Show the close button widget
        self.close_button_widget.show()



    def init_Vlayout(self):
        # Créez un QVBoxLayout pour le widget central
        self.layout = QVBoxLayout(self.centralWidget())
        self.layout.setContentsMargins(0, 30, 0, 0)

    def Vlayout(self, widget):
        # Add the given widget to the layout
        self.layout.addWidget(widget)


    def moveEvent(self, event):
        # Keep the close button near of the windwo
        new_pos = self.mapToGlobal(QPoint(self.width() - 10, 0))
        self.close_button_widget.move(new_pos)


    def set_hexagon_shape(self):
        # create QPainterPath for a hexagon shape
        path = QPainterPath()
        path.moveTo(30, 0)
        path.lineTo(self.width() - 20, 0)
        path.lineTo(self.width(), 20)
        path.lineTo(self.width(), self.height() - 0)
        path.lineTo(self.width() - 20, self.height())
        path.lineTo(20, self.height())
        path.lineTo(0, self.height() - 20)
        path.lineTo(0, 0)
        path.closeSubpath()

        # create QRegion from hexagon shape and set it as the mask for the window
        region = QRegion(path.toFillPolygon().toPolygon())
        self.setMask(region)

    def toggle_window(self):
        if self.central_widget.isVisible():  # check if central widget is visible
            # hide central widget, title label, and close button widget
            self.central_widget.hide()
            self.title_label.hide()
            self.close_button_widget.hide()
            self.hide_button.setIcon(self.show_icon)  # set icon for minimize button to show icon

        else:
            # show central widget, title label, and close button widget
            self.central_widget.show()
            self.title_label.show()
            self.close_button_widget.show()
            self.hide_button.setIcon(self.minimize_icon)  # set icon for minimize button to minimize icon



    def close_application(self):
        self.close()  # close the application window, so it has to be used in main window.

#_  _ ____ ____ ____ ____ ____ ____    ___  ____ _  _ 
#|\/| |___ [__  [__  |__| | __ |___    |__] |  |  \/  
#|  | |___ ___] ___] |  | |__] |___    |__] |__| _/\_ 
                              
                                                     
class Cypunk1MessageBox(QMessageBox):
    def __init__(self,stylesheet_path=None, *args, **kwargs):
        super().__init__(*args, **kwargs)

        self.mbGui(stylesheet_path)  


    def mbGui(self,stylesheet_path):
        #Load stylesheet if available
        if stylesheet_path:
            with open(stylesheet_path, "r") as file:
                stylesheet = file.read()
                self.setStyleSheet(stylesheet)  
     
     
        self.setWindowFlags(Qt.WindowStaysOnTopHint | Qt.FramelessWindowHint)  # set window flags
        self.setAttribute(Qt.WA_NoSystemBackground, True)  # set widget attribute for no system background
        self.setAttribute(Qt.WA_TranslucentBackground, True)  # set widget attribute for translucent background
   


    def paintEvent(self, event):
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)
        painter.setPen(Qt.NoPen)
        painter.setBrush(QColor("#505050"))

        path = QPainterPath()
        path.moveTo(30, 0)
        path.lineTo(self.width() - 20, 0)
        path.lineTo(self.width(), 20)
        path.lineTo(self.width(), self.height() - 0)
        path.lineTo(self.width() - 20, self.height())
        path.lineTo(20, self.height())
        path.lineTo(0, self.height() - 20)
        path.lineTo(0, 0)
        path.closeSubpath()

        painter.drawPath(path)
        
    def mousePressEvent(self, event):
        if event.button() == Qt.LeftButton:
            self.dragPosition = event.globalPos() - self.frameGeometry().topLeft()
            event.accept()

    def mouseMoveEvent(self, event):
        if event.buttons() == Qt.LeftButton:
            self.move(event.globalPos() - self.dragPosition)
            event.accept()



